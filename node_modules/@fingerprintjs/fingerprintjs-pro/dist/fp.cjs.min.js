/**
 * FingerprintJS Pro v3.8.5 - Copyright (c) FingerprintJS, Inc, 2023 (https://fingerprint.com)
 *
 * This software contains code from open-source projects:
 * MurmurHash3 by Karan Lyons (https://github.com/karanlyons/murmurHash3.js)
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib");function t(e){for(var t="",r=0;r<e.length;++r)if(r>0){var n=e[r].toLowerCase();n!==e[r]?t+=" ".concat(n):t+=e[r]}else t+=e[r].toUpperCase();return t}function r(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}var n={default:"endpoint"},R={default:"tlsEndpoint"},o="Client timeout",i="Network connection error",E="Network request aborted",_="Response cannot be parsed",u="Blocked by CSP",a="The endpoint parameter is not a valid URL",s=t("WrongRegion"),O=t("SubscriptionNotActive"),c=t("UnsupportedVersion"),p=t("InstallationMethodRestricted"),I=t("HostnameRestricted"),d=t("IntegrationFailed"),l="API key required",f="API key not found",N="API key expired",T="Request cannot be parsed",v="Request failed",A="Request failed to process",h="Too many requests, rate limit exceeded",P="Not available for this origin",D="Not available with restricted header",S=l,x=f,L=N,m="3.8.5",w="9319";function U(t,r){var n=[];return function(t,r){var n=5,R=(s=t,O=e.__spreadArray([],s,!0),{current:function(){return O[0]},postpone:function(){var e=O.shift();void 0!==e&&O.push(e)},exclude:function(){O.shift()}}),o=(E=100,_=3e3,a=0,function(){return Math.random()*Math.min(_,E*Math.pow(2,a++))}),i=R.current();var E,_,a;var s,O;if(void 0===i)return Promise.reject(new TypeError("The list of script URL patterns is empty"));var c=function(e,t){return r(e).catch((function(e){if(t+1>=n)throw e;!function(e){if(!(e instanceof Error))return!1;var t=e.message;return t===u||t===w}(e)?R.postpone():R.exclude();var r,i=R.current();if(void 0===i)throw e;return(r=o(),new Promise((function(e){return setTimeout(e,r)}))).then((function(){return c(i,t+1)}))}))};return c(i,0)}(t,(function(e){var t=new Date,R=function(r){return n.push({url:e,startedAt:t,finishedAt:new Date,error:r})},o=r(e);return o.then((function(){return R()}),R),o})).then((function(e){return[e,{attempts:n}]}))}var C="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js",y=C,K="Failed to load the JS script of the agent";function M(t){var n;t.scriptUrlPattern;var R=t.token,o=t.apiKey,i=void 0===o?R:o,E=e.__rest(t,["scriptUrlPattern","token","apiKey"]),_=null!==(n=r(t,"scriptUrlPattern"))&&void 0!==n?n:C;return Promise.resolve().then((function(){if(!i||"string"!=typeof i)throw new Error(l);var e=function(e,t){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t){var r=encodeURIComponent;return e.replace(/<[^<>]+>/g,(function(e){return"<version>"===e?"3":"<apiKey>"===e?r(t):"<loaderVersion>"===e?r(m):e}))}(String(e),t)}))}(_,i);return U(e,g).catch(F)})).then((function(t){var r=t[0],n=t[1];return r.load(e.__assign(e.__assign({},E),{ldi:n}))}))}function g(e){return function(e,t,r,n){var R,o=document,i="securitypolicyviolation",E=function(t){var r=new URL(e,location.href),n=t.blockedURI;n!==r.href&&n!==r.protocol.slice(0,-1)&&n!==r.origin||(R=t,_())};o.addEventListener(i,E);var _=function(){return o.removeEventListener(i,E)};return null==n||n.then(_,_),Promise.resolve().then(t).then((function(e){return _(),e}),(function(e){return new Promise((function(e){return setTimeout(e)})).then((function(){if(_(),R)return r(R);throw e}))}))}(e,(function(){return function(e){return new Promise((function(t,r){var n=document.createElement("script"),R=function(){var e;return null===(e=n.parentNode)||void 0===e?void 0:e.removeChild(n)},o=document.head||document.getElementsByTagName("head")[0];n.onload=function(){R(),t()},n.onerror=function(){R(),r(new Error(K))},n.async=!0,n.src=e,o.appendChild(n)}))}(e)}),(function(){throw new Error(u)})).then(B)}function B(){var e=window,t="__fpjs_p_l_b",r=e[t];if(function(e,t){var r,n=null===(r=Object.getOwnPropertyDescriptor)||void 0===r?void 0:r.call(Object,e,t);(null==n?void 0:n.configurable)?delete e[t]:n&&!n.writable||(e[t]=void 0)}(e,t),"function"!=typeof(null==r?void 0:r.load))throw new Error(w);return r}function F(e){throw e instanceof Error&&e.message===w?new Error(K):e}var V={load:M,defaultScriptUrlPattern:y,ERROR_SCRIPT_LOAD_FAIL:K,ERROR_API_KEY_EXPIRED:N,ERROR_API_KEY_INVALID:f,ERROR_API_KEY_MISSING:l,ERROR_BAD_REQUEST_FORMAT:T,ERROR_BAD_RESPONSE_FORMAT:_,ERROR_CLIENT_TIMEOUT:o,ERROR_CSP_BLOCK:u,ERROR_FORBIDDEN_ENDPOINT:I,ERROR_FORBIDDEN_HEADER:D,ERROR_FORBIDDEN_ORIGIN:P,ERROR_GENERAL_SERVER_FAILURE:v,ERROR_INSTALLATION_METHOD_RESTRICTED:p,ERROR_INTEGRATION_FAILURE:d,ERROR_INVALID_ENDPOINT:a,ERROR_NETWORK_ABORT:E,ERROR_NETWORK_CONNECTION:i,ERROR_RATE_LIMIT:h,ERROR_SERVER_TIMEOUT:A,ERROR_SUBSCRIPTION_NOT_ACTIVE:O,ERROR_TOKEN_EXPIRED:L,ERROR_TOKEN_INVALID:x,ERROR_TOKEN_MISSING:S,ERROR_UNSUPPORTED_VERSION:c,ERROR_WRONG_REGION:s,defaultEndpoint:n,defaultTlsEndpoint:R};exports.ERROR_API_KEY_EXPIRED=N,exports.ERROR_API_KEY_INVALID=f,exports.ERROR_API_KEY_MISSING=l,exports.ERROR_BAD_REQUEST_FORMAT=T,exports.ERROR_BAD_RESPONSE_FORMAT=_,exports.ERROR_CLIENT_TIMEOUT=o,exports.ERROR_CSP_BLOCK=u,exports.ERROR_FORBIDDEN_ENDPOINT=I,exports.ERROR_FORBIDDEN_HEADER=D,exports.ERROR_FORBIDDEN_ORIGIN=P,exports.ERROR_GENERAL_SERVER_FAILURE=v,exports.ERROR_INSTALLATION_METHOD_RESTRICTED=p,exports.ERROR_INTEGRATION_FAILURE=d,exports.ERROR_INVALID_ENDPOINT=a,exports.ERROR_NETWORK_ABORT=E,exports.ERROR_NETWORK_CONNECTION=i,exports.ERROR_RATE_LIMIT=h,exports.ERROR_SCRIPT_LOAD_FAIL=K,exports.ERROR_SERVER_TIMEOUT=A,exports.ERROR_SUBSCRIPTION_NOT_ACTIVE=O,exports.ERROR_TOKEN_EXPIRED=L,exports.ERROR_TOKEN_INVALID=x,exports.ERROR_TOKEN_MISSING=S,exports.ERROR_UNSUPPORTED_VERSION=c,exports.ERROR_WRONG_REGION=s,exports.default=V,exports.defaultEndpoint=n,exports.defaultScriptUrlPattern=y,exports.defaultTlsEndpoint=R,exports.load=M;
